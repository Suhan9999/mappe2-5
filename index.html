<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mappa Interattiva PM10</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        #map {
            height: 600px;
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>Mappa Interattiva dei Valori PM2,5</h1>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Inizializza la mappa
        const map = L.map('map').setView([41.9028, 12.4964], 6); // Coordinata centrale: Roma

        // Aggiungi il layer della mappa (OpenStreetMap)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);

        // Dati dal file CSV (puoi sostituirli dinamicamente)
        const data = [{'lat': 45.1521446, 'lng': 7.6579731, 'valore': 18, 'comune': 'Borgaro Torinese', 'provincia': 'Torino'}, {'lat': 45.0138842, 'lng': 7.8223544, 'valore': 19, 'comune': 'Chieri', 'provincia': 'Torino'}, {'lat': 45.4673791, 'lng': 7.874797, 'valore': 15, 'comune': 'Ivrea', 'provincia': 'Torino'}, {'lat': 45.1845815, 'lng': 7.7132706, 'valore': 16, 'comune': 'Leini', 'provincia': 'Torino'}, {'lat': 45.0677551, 'lng': 7.6824892, 'valore': 20, 'comune': 'Torino', 'provincia': 'Torino'}, {'lat': 45.0677551, 'lng': 7.6824892, 'valore': 16, 'comune': 'Torino', 'provincia': 'Torino'}, {'lat': 45.0677551, 'lng': 7.6824892, 'valore': 16, 'comune': 'Torino', 'provincia': 'Torino'}, {'lat': 45.7166676, 'lng': 8.2768572, 'valore': 13, 'comune': 'Borgosesia', 'provincia': 'Vercelli'}, {'lat': 45.3094496, 'lng': 8.0209788, 'valore': 19, 'comune': 'Cigliano', 'provincia': 'Vercelli'}, {'lat': 45.55538265, 'lng': 8.346283678327271, 'valore': 15, 'comune': 'Vercelli', 'provincia': 'Vercelli'}, {'lat': 45.6989107, 'lng': 8.4623673, 'valore': 20, 'comune': 'Borgomanero', 'provincia': 'Novara'}, {'lat': 45.58425005, 'lng': 8.545996970894572, 'valore': 14, 'comune': 'Novara', 'provincia': 'Novara'}, {'lat': 44.6976778, 'lng': 7.8542707, 'valore': 14, 'comune': 'Bra', 'provincia': 'Cuneo'}, {'lat': 44.709839, 'lng': 7.686329, 'valore': 18, 'comune': 'Cavallermaggiore', 'provincia': 'Cuneo'}, {'lat': 44.45807035, 'lng': 7.558136691151624, 'valore': 12, 'comune': 'Cuneo', 'provincia': 'Cuneo'}, {'lat': 44.82601265, 'lng': 8.202686328987273, 'valore': 17, 'comune': 'Asti', 'provincia': 'Asti'}, {'lat': 44.8073181, 'lng': 8.3173855, 'valore': 13, 'comune': 'Vinchio', 'provincia': 'Asti'}, {'lat': 44.83495335, 'lng': 8.745030418605868, 'valore': 15, 'comune': 'Alessandria', 'provincia': 'Alessandria'}, {'lat': 45.5669538, 'lng': 8.086912008297636, 'valore': 10, 'comune': 'Biella', 'provincia': 'Biella'}, {'lat': 45.666126, 'lng': 8.144302, 'valore': 9, 'comune': 'Valdilana', 'provincia': 'Biella'}, {'lat': 45.9344082, 'lng': 8.5580062, 'valore': 12, 'comune': 'Verbania', 'provincia': 'Verbano-Cusio-Ossola'}, {'lat': 45.7370885, 'lng': 7.3196649, 'valore': 9, 'comune': 'Aosta', 'provincia': 'Aosta'}, {'lat': 45.7370885, 'lng': 7.3196649, 'valore': 11, 'comune': 'Aosta', 'provincia': 'Aosta'}, {'lat': 45.7370885, 'lng': 7.3196649, 'valore': 11, 'comune': 'Aosta', 'provincia': 'Aosta'}, {'lat': 45.6256764, 'lng': 9.0373283, 'valore': 18, 'comune': 'Saronno', 'provincia': 'Varese'}, {'lat': 45.8397203, 'lng': 8.754133838056571, 'valore': 15, 'comune': 'Varese', 'provincia': 'Varese'}, {'lat': 45.939475900000005, 'lng': 9.149410132545793, 'valore': 15, 'comune': 'Como', 'provincia': 'Como'}, {'lat': 45.8097196, 'lng': 9.2166985, 'valore': 15, 'comune': 'Erba', 'provincia': 'Como'}, {'lat': 46.4692482, 'lng': 10.3721712, 'valore': 9, 'comune': 'Bormio', 'provincia': 'Sondrio'}, {'lat': 46.32336235, 'lng': 10.258413671017705, 'valore': 16, 'comune': 'Sondrio', 'provincia': 'Sondrio'}, {'lat': 45.4641943, 'lng': 9.1896346, 'valore': 18, 'comune': 'Milano', 'provincia': 'Milano'}, {'lat': 45.4641943, 'lng': 9.1896346, 'valore': 21, 'comune': 'Milano', 'provincia': 'Milano'}, {'lat': 45.4641943, 'lng': 9.1896346, 'valore': 16, 'comune': 'Milano', 'provincia': 'Milano'}, {'lat': 45.5357218, 'lng': 9.2376549, 'valore': 16, 'comune': 'Sesto San Giovanni', 'provincia': 'Milano'}, {'lat': 45.7566557, 'lng': 9.754219200862249, 'valore': 20, 'comune': 'Bergamo', 'provincia': 'Bergamo'}, {'lat': 45.691379, 'lng': 9.472649, 'valore': 14, 'comune': "Calusco d'Adda", 'provincia': 'Bergamo'}, {'lat': 45.4941243, 'lng': 9.5678078, 'valore': 23, 'comune': "Casirate d'Adda", 'provincia': 'Bergamo'}, {'lat': 45.6472193, 'lng': 9.6019202, 'valore': 20, 'comune': 'Dalmine', 'provincia': 'Bergamo'}, {'lat': 45.5217245, 'lng': 9.5931485, 'valore': 21, 'comune': 'Treviglio', 'provincia': 'Bergamo'}, {'lat': 45.77958045, 'lng': 10.4258729694612, 'valore': 15, 'comune': 'Brescia', 'provincia': 'Brescia'}, {'lat': 45.77958045, 'lng': 10.4258729694612, 'valore': 21, 'comune': 'Brescia', 'provincia': 'Brescia'}, {'lat': 45.77958045, 'lng': 10.4258729694612, 'valore': 20, 'comune': 'Brescia', 'provincia': 'Brescia'}, {'lat': 45.77958045, 'lng': 10.4258729694612, 'valore': 19, 'comune': 'Brescia', 'provincia': 'Brescia'}, {'lat': 45.2826019, 'lng': 8.7508446, 'valore': 17, 'comune': 'Parona', 'provincia': 'Pavia'}, {'lat': 45.03685465, 'lng': 9.137825082826026, 'valore': 19, 'comune': 'Pavia', 'provincia': 'Pavia'}, {'lat': 45.102259, 'lng': 8.906348, 'valore': 16, 'comune': "Sannazzaro de' Burgondi", 'provincia': 'Pavia'}, {'lat': 45.22086405, 'lng': 10.037037979628856, 'valore': 21, 'comune': 'Cremona', 'provincia': 'Cremona'}, {'lat': 45.22086405, 'lng': 10.037037979628856, 'valore': 22, 'comune': 'Cremona', 'provincia': 'Cremona'}, {'lat': 45.2871222, 'lng': 9.8570508, 'valore': 24, 'comune': 'Soresina', 'provincia': 'Cremona'}, {'lat': 45.1487508, 'lng': 9.9296724, 'valore': 24, 'comune': 'Spinadesco', 'provincia': 'Cremona'}, {'lat': 45.1692628, 'lng': 10.670836515673878, 'valore': 17, 'comune': 'Mantova', 'provincia': 'Mantova'}, {'lat': 45.4125151, 'lng': 10.6872208, 'valore': 19, 'comune': 'Ponti sul Mincio', 'provincia': 'Mantova'}, {'lat': 44.9950936, 'lng': 11.0729809, 'valore': 18, 'comune': 'Schivenoglia', 'provincia': 'Mantova'}, {'lat': 45.9005485, 'lng': 9.41202482143963, 'valore': 14, 'comune': 'Lecco', 'provincia': 'Lecco'}, {'lat': 45.698679, 'lng': 9.411648, 'valore': 14, 'comune': 'Merate', 'provincia': 'Lecco'}, {'lat': 45.9323784, 'lng': 9.4865286, 'valore': 7, 'comune': 'Moggio', 'provincia': 'Lecco'}, {'lat': 45.2613104, 'lng': 9.491678060021837, 'valore': 15, 'comune': 'Lodi', 'provincia': 'Lodi'}, {'lat': 45.2613104, 'lng': 9.491678060021837, 'valore': 21, 'comune': 'Lodi', 'provincia': 'Lodi'}, {'lat': 45.6395418, 'lng': 9.278830418070044, 'valore': 18, 'comune': 'Monza', 'provincia': 'Monza e della Brianza'}, {'lat': 46.6173435, 'lng': 10.8595388, 'valore': 12, 'comune': 'Laces', 'provincia': 'Bolzano'}, {'lat': 46.0533463, 'lng': 11.4566004, 'valore': 13, 'comune': 'Borgo Valsugana', 'provincia': 'Trento'}, {'lat': 45.886548, 'lng': 11.0452369, 'valore': 14, 'comune': 'Rovereto', 'provincia': 'Trento'}, {'lat': 46.1029536, 'lng': 11.12974249416882, 'valore': 15, 'comune': 'Trento', 'provincia': 'Trento'}, {'lat': 45.4424977, 'lng': 10.985737689444765, 'valore': 20, 'comune': 'Verona', 'provincia': 'Verona'}, {'lat': 45.7669109, 'lng': 11.7343469, 'valore': 16, 'comune': 'Bassano del Grappa', 'provincia': 'Vicenza'}, {'lat': 45.7113511, 'lng': 11.3553593, 'valore': 18, 'comune': 'Schio', 'provincia': 'Vicenza'}, {'lat': 45.63485905, 'lng': 11.40635425660249, 'valore': 22, 'comune': 'Vicenza', 'provincia': 'Vicenza'}, {'lat': 46.0163755, 'lng': 11.9062541, 'valore': 18, 'comune': 'Feltre', 'provincia': 'Belluno'}, {'lat': 45.80669135, 'lng': 12.206315763116372, 'valore': 21, 'comune': 'Treviso', 'provincia': 'Treviso'}, {'lat': 45.61850076543068, 'lng': 8.852397742145238, 'valore': 22, 'comune': 'San Donà di Piave', 'provincia': 'Venezia'}, {'lat': 45.4371908, 'lng': 12.3345898, 'valore': 20, 'comune': 'Venezia', 'provincia': 'Venezia'}, {'lat': 45.2240069, 'lng': 11.659796, 'valore': 23, 'comune': 'Este', 'provincia': 'Padova'}, {'lat': 45.391408, 'lng': 11.805848677115884, 'valore': 24, 'comune': 'Padova', 'provincia': 'Padova'}, {'lat': 45.8835902, 'lng': 13.2849613, 'valore': 15, 'comune': 'Bagnaria Arsa', 'provincia': 'Udine'}, {'lat': 46.4295026, 'lng': 13.0561666, 'valore': 11, 'comune': 'Tolmezzo', 'provincia': 'Udine'}, {'lat': 45.822216, 'lng': 13.276933, 'valore': 16, 'comune': 'Torviscosa', 'provincia': 'Udine'}, {'lat': 45.822216, 'lng': 13.276933, 'valore': 16, 'comune': 'Torviscosa', 'provincia': 'Udine'}, {'lat': 46.0634632, 'lng': 13.2358377, 'valore': 13, 'comune': 'Udine', 'provincia': 'Udine'}, {'lat': 46.0634632, 'lng': 13.2358377, 'valore': 14, 'comune': 'Udine', 'provincia': 'Udine'}, {'lat': 45.9441278, 'lng': 13.6252288, 'valore': 13, 'comune': 'Gorizia', 'provincia': 'Gorizia'}, {'lat': 45.6781065, 'lng': 13.3979091, 'valore': 12, 'comune': 'Grado', 'provincia': 'Gorizia'}, {'lat': 45.8049454, 'lng': 13.5330592, 'valore': 13, 'comune': 'Monfalcone', 'provincia': 'Gorizia'}, {'lat': 45.8049454, 'lng': 13.5330592, 'valore': 12, 'comune': 'Monfalcone', 'provincia': 'Gorizia'}, {'lat': 45.6496485, 'lng': 13.7772781, 'valore': 12, 'comune': 'Trieste', 'provincia': 'Trieste'}, {'lat': 45.6496485, 'lng': 13.7772781, 'valore': 10, 'comune': 'Trieste', 'provincia': 'Trieste'}, {'lat': 45.6496485, 'lng': 13.7772781, 'valore': 12, 'comune': 'Trieste', 'provincia': 'Trieste'}, {'lat': 45.9562503, 'lng': 12.6597197, 'valore': 16, 'comune': 'Pordenone', 'provincia': 'Pordenone'}, {'lat': 45.95386, 'lng': 12.503368, 'valore': 17, 'comune': 'Sacile', 'provincia': 'Pordenone'}, {'lat': 44.0492503, 'lng': 8.2131239, 'valore': 9, 'comune': 'Albenga', 'provincia': 'Savona'}, {'lat': 44.249735, 'lng': 8.443353, 'valore': 9, 'comune': 'Bergeggi', 'provincia': 'Savona'}, {'lat': 44.3992684, 'lng': 8.2745606, 'valore': 13, 'comune': 'Cairo Montenotte', 'provincia': 'Savona'}, {'lat': 44.3992684, 'lng': 8.2745606, 'valore': 12, 'comune': 'Cairo Montenotte', 'provincia': 'Savona'}, {'lat': 44.3992684, 'lng': 8.2745606, 'valore': 11, 'comune': 'Cairo Montenotte', 'provincia': 'Savona'}, {'lat': 44.3902587, 'lng': 8.2079522, 'valore': 7, 'comune': 'Cengio', 'provincia': 'Savona'}, {'lat': 44.292536, 'lng': 8.412652, 'valore': 9, 'comune': 'Quiliano', 'provincia': 'Savona'}, {'lat': 44.2334238, 'lng': 8.252572737021062, 'valore': 11, 'comune': 'Savona', 'provincia': 'Savona'}, {'lat': 44.2334238, 'lng': 8.252572737021062, 'valore': 8, 'comune': 'Savona', 'provincia': 'Savona'}, {'lat': 44.2334238, 'lng': 8.252572737021062, 'valore': 7, 'comune': 'Savona', 'provincia': 'Savona'}, {'lat': 44.2714401, 'lng': 8.4382205, 'valore': 11, 'comune': 'Vado Ligure', 'provincia': 'Savona'}, {'lat': 44.2714401, 'lng': 8.4382205, 'valore': 10, 'comune': 'Vado Ligure', 'provincia': 'Savona'}, {'lat': 44.573483, 'lng': 8.9433002, 'valore': 14, 'comune': 'Busalla', 'provincia': 'Genova'}, {'lat': 44.507337, 'lng': 8.8901102, 'valore': 7, 'comune': 'Campomorone', 'provincia': 'Genova'}, {'lat': 44.3164494, 'lng': 9.3233382, 'valore': 8, 'comune': 'Chiavari', 'provincia': 'Genova'}, {'lat': 44.40726, 'lng': 8.9338624, 'valore': 8, 'comune': 'Genova', 'provincia': 'Genova'}, {'lat': 44.40726, 'lng': 8.9338624, 'valore': 8, 'comune': 'Genova', 'provincia': 'Genova'}, {'lat': 44.40726, 'lng': 8.9338624, 'valore': 12, 'comune': 'Genova', 'provincia': 'Genova'}, {'lat': 44.40726, 'lng': 8.9338624, 'valore': 11, 'comune': 'Genova', 'provincia': 'Genova'}, {'lat': 44.5013362, 'lng': 8.7163481, 'valore': 9, 'comune': 'Masone', 'provincia': 'Genova'}, {'lat': 44.3511473, 'lng': 9.229671, 'valore': 11, 'comune': 'Rapallo', 'provincia': 'Genova'}, {'lat': 44.23836595, 'lng': 9.691232634547536, 'valore': 11, 'comune': 'La Spezia', 'provincia': 'La Spezia'}, {'lat': 44.23836595, 'lng': 9.691232634547536, 'valore': 8, 'comune': 'La Spezia', 'provincia': 'La Spezia'}, {'lat': 44.23836595, 'lng': 9.691232634547536, 'valore': 10, 'comune': 'La Spezia', 'provincia': 'La Spezia'}, {'lat': 44.23836595, 'lng': 9.691232634547536, 'valore': 10, 'comune': 'La Spezia', 'provincia': 'La Spezia'}, {'lat': 44.987157, 'lng': 9.9535782, 'valore': 15, 'comune': 'Besenzone', 'provincia': 'Piacenza'}, {'lat': 44.8476352, 'lng': 9.666531257696896, 'valore': 19, 'comune': 'Piacenza', 'provincia': 'Piacenza'}, {'lat': 44.6130645, 'lng': 10.2661136, 'valore': 10, 'comune': 'Langhirano', 'provincia': 'Parma'}, {'lat': 44.6952006, 'lng': 10.097986896904466, 'valore': 15, 'comune': 'Parma', 'provincia': 'Parma'}, {'lat': 44.5102806, 'lng': 10.7286395, 'valore': 14, 'comune': 'Castellarano', 'provincia': "Reggio nell'Emilia"}, {'lat': 44.9211516, 'lng': 10.6539985, 'valore': 16, 'comune': 'Guastalla', 'provincia': "Reggio nell'Emilia"}, {'lat': 44.6086674, 'lng': 10.594066675914796, 'valore': 15, 'comune': "Reggio nell'Emilia", 'provincia': "Reggio nell'Emilia"}, {'lat': 44.8872071, 'lng': 11.0661063, 'valore': 18, 'comune': 'Mirandola', 'provincia': 'Modena'}, {'lat': 44.5384728, 'lng': 10.93596087053074, 'valore': 18, 'comune': 'Modena', 'provincia': 'Modena'}, {'lat': 44.5409769, 'lng': 10.7829023, 'valore': 13, 'comune': 'Sassuolo', 'provincia': 'Modena'}, {'lat': 44.4938203, 'lng': 11.3426327, 'valore': 13, 'comune': 'Bologna', 'provincia': 'Bologna'}, {'lat': 44.4938203, 'lng': 11.3426327, 'valore': 14, 'comune': 'Bologna', 'provincia': 'Bologna'}, {'lat': 44.620853, 'lng': 11.6702371, 'valore': 16, 'comune': 'Molinella', 'provincia': 'Bologna'}, {'lat': 44.1239131, 'lng': 10.937216088213724, 'valore': 5, 'comune': 'Alto Reno Terme', 'provincia': 'Bologna'}, {'lat': 44.76676425, 'lng': 11.827938995640167, 'valore': 17, 'comune': 'Ferrara', 'provincia': 'Ferrara'}, {'lat': 44.8824077, 'lng': 11.9793488, 'valore': 14, 'comune': 'Jolanda di Savoia', 'provincia': 'Ferrara'}, {'lat': 44.745678, 'lng': 11.943521, 'valore': 15, 'comune': 'Ostellato', 'provincia': 'Ferrara'}, {'lat': 44.2855555, 'lng': 11.8832055, 'valore': 12, 'comune': 'Faenza', 'provincia': 'Ravenna'}, {'lat': 44.3640607, 'lng': 12.059009490863945, 'valore': 14, 'comune': 'Ravenna', 'provincia': 'Ravenna'}, {'lat': 44.0925118, 'lng': 12.3991309, 'valore': 14, 'comune': 'Savignano sul Rubicone', 'provincia': "Forli'-Cesena"}, {'lat': 43.946543250000005, 'lng': 12.63074901925494, 'valore': 16, 'comune': 'Rimini', 'provincia': 'Rimini'}, {'lat': 44.0359323, 'lng': 10.1395519, 'valore': 12, 'comune': 'Massa', 'provincia': 'Massa Carrara'}, {'lat': 43.8420391, 'lng': 10.5735254, 'valore': 18, 'comune': 'Capannori', 'provincia': 'Lucca'}, {'lat': 43.8672392, 'lng': 10.2506055, 'valore': 13, 'comune': 'Viareggio', 'provincia': 'Lucca'}, {'lat': 43.9352396, 'lng': 11.0158786, 'valore': 17, 'comune': 'Montale', 'provincia': 'Pistoia'}, {'lat': 43.7697955, 'lng': 11.2556404, 'valore': 14, 'comune': 'Firenze', 'provincia': 'Firenze'}, {'lat': 43.7697955, 'lng': 11.2556404, 'valore': 11, 'comune': 'Firenze', 'provincia': 'Firenze'}, {'lat': 42.7902379, 'lng': 10.340223929577242, 'valore': 8, 'comune': 'Livorno', 'provincia': 'Livorno'}, {'lat': 42.7902379, 'lng': 10.340223929577242, 'valore': 13, 'comune': 'Livorno', 'provincia': 'Livorno'}, {'lat': 43.4714722, 'lng': 10.679791173704576, 'valore': 12, 'comune': 'Pisa', 'provincia': 'Pisa'}, {'lat': 43.4714722, 'lng': 10.679791173704576, 'valore': 13, 'comune': 'Pisa', 'provincia': 'Pisa'}, {'lat': 43.51714415, 'lng': 11.763928194732204, 'valore': 13, 'comune': 'Arezzo', 'provincia': 'Arezzo'}, {'lat': 43.4677215, 'lng': 11.148762, 'valore': 11, 'comune': 'Poggibonsi', 'provincia': 'Siena'}, {'lat': 42.7751102, 'lng': 11.287804427628435, 'valore': 9, 'comune': 'Grosseto', 'provincia': 'Grosseto'}, {'lat': 43.935718050000006, 'lng': 11.09414726770089, 'valore': 12, 'comune': 'Prato', 'provincia': 'Prato'}, {'lat': 43.935718050000006, 'lng': 11.09414726770089, 'valore': 16, 'comune': 'Prato', 'provincia': 'Prato'}, {'lat': 42.9559744, 'lng': 12.7034782, 'valore': 18, 'comune': 'Foligno', 'provincia': 'Perugia'}, {'lat': 42.8334672, 'lng': 12.5777111, 'valore': 8, 'comune': "Giano dell'Umbria", 'provincia': 'Perugia'}, {'lat': 43.3517605, 'lng': 12.5772959, 'valore': 12, 'comune': 'Gubbio', 'provincia': 'Perugia'}, {'lat': 43.3517605, 'lng': 12.5772959, 'valore': 9, 'comune': 'Gubbio', 'provincia': 'Perugia'}, {'lat': 43.3517605, 'lng': 12.5772959, 'valore': 14, 'comune': 'Gubbio', 'provincia': 'Perugia'}, {'lat': 43.3517605, 'lng': 12.5772959, 'valore': 12, 'comune': 'Gubbio', 'provincia': 'Perugia'}, {'lat': 43.3517605, 'lng': 12.5772959, 'valore': 9, 'comune': 'Gubbio', 'provincia': 'Perugia'}, {'lat': 43.1427366, 'lng': 12.2034965, 'valore': 14, 'comune': 'Magione', 'provincia': 'Perugia'}, {'lat': 43.1070321, 'lng': 12.402996209906489, 'valore': 12, 'comune': 'Perugia', 'provincia': 'Perugia'}, {'lat': 43.1070321, 'lng': 12.402996209906489, 'valore': 13, 'comune': 'Perugia', 'provincia': 'Perugia'}, {'lat': 43.1070321, 'lng': 12.402996209906489, 'valore': 11, 'comune': 'Perugia', 'provincia': 'Perugia'}, {'lat': 42.7342971, 'lng': 12.7382035, 'valore': 11, 'comune': 'Spoleto', 'provincia': 'Perugia'}, {'lat': 42.7342971, 'lng': 12.7382035, 'valore': 14, 'comune': 'Spoleto', 'provincia': 'Perugia'}, {'lat': 43.028542, 'lng': 12.44136, 'valore': 11, 'comune': 'Torgiano', 'provincia': 'Perugia'}, {'lat': 42.5195891, 'lng': 12.5152257, 'valore': 17, 'comune': 'Narni', 'provincia': 'Terni'}, {'lat': 42.7186152, 'lng': 12.1087907, 'valore': 9, 'comune': 'Orvieto', 'provincia': 'Terni'}, {'lat': 42.6539486, 'lng': 12.439652829139408, 'valore': 16, 'comune': 'Terni', 'provincia': 'Terni'}, {'lat': 42.6539486, 'lng': 12.439652829139408, 'valore': 16, 'comune': 'Terni', 'provincia': 'Terni'}, {'lat': 42.6539486, 'lng': 12.439652829139408, 'valore': 15, 'comune': 'Terni', 'provincia': 'Terni'}, {'lat': 42.6539486, 'lng': 12.439652829139408, 'valore': 15, 'comune': 'Terni', 'provincia': 'Terni'}, {'lat': 43.9098114, 'lng': 12.9131228, 'valore': 16, 'comune': 'Pesaro', 'provincia': 'Pesaro e Urbino'}, {'lat': 43.4801189, 'lng': 13.218727943815642, 'valore': 14, 'comune': 'Ancona', 'provincia': 'Ancona'}, {'lat': 43.4801189, 'lng': 13.218727943815642, 'valore': 15, 'comune': 'Ancona', 'provincia': 'Ancona'}, {'lat': 43.6020552, 'lng': 13.3254004, 'valore': 18, 'comune': 'Chiaravalle', 'provincia': 'Ancona'}, {'lat': 43.3358407, 'lng': 12.9046187, 'valore': 13, 'comune': 'Fabriano', 'provincia': 'Ancona'}, {'lat': 43.6293969, 'lng': 13.3966763, 'valore': 13, 'comune': 'Falconara Marittima', 'provincia': 'Ancona'}, {'lat': 43.429655, 'lng': 12.934965, 'valore': 6, 'comune': 'Genga', 'provincia': 'Ancona'}, {'lat': 43.3055233, 'lng': 13.7229297, 'valore': 8, 'comune': 'Civitanova Marche', 'provincia': 'Macerata'}, {'lat': 43.15297805, 'lng': 13.150882217502016, 'valore': 11, 'comune': 'Macerata', 'provincia': 'Macerata'}, {'lat': 42.8834204, 'lng': 13.539593040686007, 'valore': 9, 'comune': 'Ascoli Piceno', 'provincia': 'Ascoli Piceno'}, {'lat': 42.8991551, 'lng': 13.3268587, 'valore': 6, 'comune': 'Montemonaco', 'provincia': 'Ascoli Piceno'}, {'lat': 42.9961784, 'lng': 13.7617959, 'valore': 8, 'comune': 'Ripatransone', 'provincia': 'Ascoli Piceno'}, {'lat': 42.7439961, 'lng': 11.864988, 'valore': 9, 'comune': 'Acquapendente', 'provincia': 'Viterbo'}, {'lat': 42.492952200000005, 'lng': 11.948813551650236, 'valore': 9, 'comune': 'Viterbo', 'provincia': 'Viterbo'}, {'lat': 42.56315, 'lng': 12.9638499, 'valore': 7, 'comune': 'Leonessa', 'provincia': 'Rieti'}, {'lat': 42.41473635, 'lng': 12.885888076510067, 'valore': 10, 'comune': 'Rieti', 'provincia': 'Rieti'}, {'lat': 42.156218, 'lng': 11.9038323, 'valore': 9, 'comune': 'Allumiere', 'provincia': 'Roma'}, {'lat': 42.0937524, 'lng': 11.7922462, 'valore': 7, 'comune': 'Civitavecchia', 'provincia': 'Roma'}, {'lat': 42.0937524, 'lng': 11.7922462, 'valore': 9, 'comune': 'Civitavecchia', 'provincia': 'Roma'}, {'lat': 42.0937524, 'lng': 11.7922462, 'valore': 9, 'comune': 'Civitavecchia', 'provincia': 'Roma'}, {'lat': 42.0937524, 'lng': 11.7922462, 'valore': 8, 'comune': 'Civitavecchia', 'provincia': 'Roma'}, {'lat': 41.727033, 'lng': 13.0041576, 'valore': 19, 'comune': 'Colleferro', 'provincia': 'Roma'}, {'lat': 41.9842734, 'lng': 12.6953191, 'valore': 10, 'comune': 'Guidonia Montecelio', 'provincia': 'Roma'}, {'lat': 41.8933203, 'lng': 12.4829321, 'valore': 13, 'comune': 'Roma', 'provincia': 'Roma'}, {'lat': 41.8933203, 'lng': 12.4829321, 'valore': 10, 'comune': 'Roma', 'provincia': 'Roma'}, {'lat': 41.8933203, 'lng': 12.4829321, 'valore': 12, 'comune': 'Roma', 'provincia': 'Roma'}, {'lat': 41.8933203, 'lng': 12.4829321, 'valore': 14, 'comune': 'Roma', 'provincia': 'Roma'}, {'lat': 41.8933203, 'lng': 12.4829321, 'valore': 13, 'comune': 'Roma', 'provincia': 'Roma'}, {'lat': 41.8933203, 'lng': 12.4829321, 'valore': 12, 'comune': 'Roma', 'provincia': 'Roma'}, {'lat': 41.8933203, 'lng': 12.4829321, 'valore': 12, 'comune': 'Roma', 'provincia': 'Roma'}, {'lat': 41.8933203, 'lng': 12.4829321, 'valore': 12, 'comune': 'Roma', 'provincia': 'Roma'}, {'lat': 41.7712145, 'lng': 12.2278855, 'valore': 11, 'comune': 'Fiumicino', 'provincia': 'Roma'}, {'lat': 41.45952605, 'lng': 13.012591212188894, 'valore': 10, 'comune': 'Latina', 'provincia': 'Latina'}, {'lat': 41.4925576, 'lng': 13.8305297, 'valore': 23, 'comune': 'Cassino', 'provincia': 'Frosinone'}, {'lat': 41.692932, 'lng': 13.2534215, 'valore': 19, 'comune': 'Ferentino', 'provincia': 'Frosinone'}, {'lat': 41.6679656, 'lng': 13.6755758, 'valore': 10, 'comune': 'Fontechiari', 'provincia': 'Frosinone'}, {'lat': 41.6285468, 'lng': 13.57584977062367, 'valore': 15, 'comune': 'Frosinone', 'provincia': 'Frosinone'}, {'lat': 41.7842727, 'lng': 14.1080639, 'valore': 10, 'comune': 'Castel di Sangro', 'provincia': "L'Aquila"}, {'lat': 42.1368853, 'lng': 13.610341022538911, 'valore': 9, 'comune': "L'Aquila", 'provincia': "L'Aquila"}, {'lat': 42.5136032, 'lng': 14.1516203, 'valore': 12, 'comune': 'Montesilvano', 'provincia': 'Pescara'}, {'lat': 42.3102619, 'lng': 13.95759010584892, 'valore': 13, 'comune': 'Pescara', 'provincia': 'Pescara'}, {'lat': 42.3102619, 'lng': 13.95759010584892, 'valore': 12, 'comune': 'Pescara', 'provincia': 'Pescara'}, {'lat': 42.10269285, 'lng': 14.41590530501923, 'valore': 13, 'comune': 'Chieti', 'provincia': 'Chieti'}, {'lat': 42.4168011, 'lng': 14.2914819, 'valore': 11, 'comune': 'Francavilla al Mare', 'provincia': 'Chieti'}, {'lat': 41.7172648, 'lng': 14.82622669782002, 'valore': 11, 'comune': 'Campobasso', 'provincia': 'Campobasso'}, {'lat': 41.9983273, 'lng': 14.9939366, 'valore': 10, 'comune': 'Termoli', 'provincia': 'Campobasso'}, {'lat': 41.483425, 'lng': 14.045112, 'valore': 21, 'comune': 'Venafro', 'provincia': 'Isernia'}, {'lat': 40.973212, 'lng': 14.204928, 'valore': 20, 'comune': 'Aversa', 'provincia': 'Caserta'}, {'lat': 41.20351925, 'lng': 14.116862382970815, 'valore': 10, 'comune': 'Caserta', 'provincia': 'Caserta'}, {'lat': 41.20351925, 'lng': 14.116862382970815, 'valore': 12, 'comune': 'Caserta', 'provincia': 'Caserta'}, {'lat': 41.0398815, 'lng': 14.3792066, 'valore': 15, 'comune': 'Maddaloni', 'provincia': 'Caserta'}, {'lat': 41.0123935, 'lng': 14.4829931, 'valore': 16, 'comune': 'San Felice a Cancello', 'provincia': 'Caserta'}, {'lat': 41.2476307, 'lng': 14.705705363146528, 'valore': 16, 'comune': 'Benevento', 'provincia': 'Benevento'}, {'lat': 41.2476307, 'lng': 14.705705363146528, 'valore': 17, 'comune': 'Benevento', 'provincia': 'Benevento'}, {'lat': 40.9460532, 'lng': 14.3750083, 'valore': 21, 'comune': 'Acerra', 'provincia': 'Napoli'}, {'lat': 40.9045572, 'lng': 14.2901223, 'valore': 19, 'comune': 'Casoria', 'provincia': 'Napoli'}, {'lat': 40.8358846, 'lng': 14.2487679, 'valore': 20, 'comune': 'Napoli', 'provincia': 'Napoli'}, {'lat': 40.8358846, 'lng': 14.2487679, 'valore': 14, 'comune': 'Napoli', 'provincia': 'Napoli'}, {'lat': 40.8358846, 'lng': 14.2487679, 'valore': 11, 'comune': 'Napoli', 'provincia': 'Napoli'}, {'lat': 40.8358846, 'lng': 14.2487679, 'valore': 13, 'comune': 'Napoli', 'provincia': 'Napoli'}, {'lat': 40.8358846, 'lng': 14.2487679, 'valore': 8, 'comune': 'Napoli', 'provincia': 'Napoli'}, {'lat': 40.907912, 'lng': 14.386233, 'valore': 13, 'comune': "Pomigliano d'Arco", 'provincia': 'Napoli'}, {'lat': 40.8189733, 'lng': 14.3387454, 'valore': 11, 'comune': 'Portici', 'provincia': 'Napoli'}, {'lat': 40.927213, 'lng': 14.480134, 'valore': 26, 'comune': 'San Vitaliano', 'provincia': 'Napoli'}, {'lat': 40.878411, 'lng': 14.342932, 'valore': 21, 'comune': 'Volla', 'provincia': 'Napoli'}, {'lat': 40.9965446, 'lng': 15.1405690365004, 'valore': 15, 'comune': 'Avellino', 'provincia': 'Avellino'}, {'lat': 40.8291308, 'lng': 14.8456516, 'valore': 14, 'comune': 'Solofra', 'provincia': 'Avellino'}, {'lat': 40.6092539, 'lng': 14.9821443, 'valore': 10, 'comune': 'Battipaglia', 'provincia': 'Salerno'}, {'lat': 40.7004616, 'lng': 14.7062633, 'valore': 14, 'comune': "Cava de' Tirreni", 'provincia': 'Salerno'}, {'lat': 40.7472133, 'lng': 14.6433202, 'valore': 15, 'comune': 'Nocera Inferiore', 'provincia': 'Salerno'}, {'lat': 40.4628565, 'lng': 15.3152335, 'valore': 6, 'comune': 'Ottati', 'provincia': 'Salerno'}, {'lat': 40.517112, 'lng': 15.497962, 'valore': 10, 'comune': 'Polla', 'provincia': 'Salerno'}, {'lat': 40.41944165, 'lng': 15.310608468834516, 'valore': 11, 'comune': 'Salerno', 'provincia': 'Salerno'}, {'lat': 41.50281055, 'lng': 15.452893911491383, 'valore': 11, 'comune': 'Foggia', 'provincia': 'Foggia'}, {'lat': 41.5082727, 'lng': 15.3376465, 'valore': 10, 'comune': 'Lucera', 'provincia': 'Foggia'}, {'lat': 41.6897761, 'lng': 15.3776211, 'valore': 12, 'comune': 'San Severo', 'provincia': 'Foggia'}, {'lat': 40.8285595, 'lng': 16.5527314, 'valore': 11, 'comune': 'Altamura', 'provincia': 'Bari'}, {'lat': 40.957131, 'lng': 16.920388, 'valore': 12, 'comune': 'Casamassima', 'provincia': 'Bari'}, {'lat': 41.0825639, 'lng': 16.7805515, 'valore': 13, 'comune': 'Modugno', 'provincia': 'Bari'}, {'lat': 40.9522369, 'lng': 17.299948, 'valore': 11, 'comune': 'Monopoli', 'provincia': 'Bari'}, {'lat': 40.9522369, 'lng': 17.299948, 'valore': 11, 'comune': 'Monopoli', 'provincia': 'Bari'}, {'lat': 40.54881555, 'lng': 17.08058012454743, 'valore': 9, 'comune': 'Taranto', 'provincia': 'Taranto'}, {'lat': 40.54881555, 'lng': 17.08058012454743, 'valore': 11, 'comune': 'Taranto', 'provincia': 'Taranto'}, {'lat': 40.54881555, 'lng': 17.08058012454743, 'valore': 12, 'comune': 'Taranto', 'provincia': 'Taranto'}, {'lat': 40.54881555, 'lng': 17.08058012454743, 'valore': 11, 'comune': 'Taranto', 'provincia': 'Taranto'}, {'lat': 40.63591975, 'lng': 17.688443357842537, 'valore': 12, 'comune': 'Brindisi', 'provincia': 'Brindisi'}, {'lat': 40.63591975, 'lng': 17.688443357842537, 'valore': 12, 'comune': 'Brindisi', 'provincia': 'Brindisi'}, {'lat': 40.63591975, 'lng': 17.688443357842537, 'valore': 11, 'comune': 'Brindisi', 'provincia': 'Brindisi'}, {'lat': 40.6460444, 'lng': 17.5170566, 'valore': 11, 'comune': 'Ceglie Messapica', 'provincia': 'Brindisi'}, {'lat': 40.484029, 'lng': 18.051619, 'valore': 19, 'comune': 'Torchiarolo', 'provincia': 'Brindisi'}, {'lat': 40.484029, 'lng': 18.051619, 'valore': 12, 'comune': 'Torchiarolo', 'provincia': 'Brindisi'}, {'lat': 40.3984955, 'lng': 18.0183191, 'valore': 14, 'comune': 'Campi Salentina', 'provincia': 'Lecce'}, {'lat': 40.1742781, 'lng': 18.1678388, 'valore': 14, 'comune': 'Galatina', 'provincia': 'Lecce'}, {'lat': 40.1522173, 'lng': 18.2260628338229, 'valore': 11, 'comune': 'Lecce', 'provincia': 'Lecce'}, {'lat': 40.1522173, 'lng': 18.2260628338229, 'valore': 12, 'comune': 'Lecce', 'provincia': 'Lecce'}, {'lat': 40.1522173, 'lng': 18.2260628338229, 'valore': 13, 'comune': 'Lecce', 'provincia': 'Lecce'}, {'lat': 41.3214976, 'lng': 16.2868696, 'valore': 13, 'comune': 'Barletta', 'provincia': 'Barletta-Andria-Trani'}, {'lat': 40.28281, 'lng': 15.888773, 'valore': 11, 'comune': 'Grumento Nova', 'provincia': 'Potenza'}, {'lat': 40.360513, 'lng': 16.098877, 'valore': 9, 'comune': 'Guardia Perticara', 'provincia': 'Potenza'}, {'lat': 40.9961268, 'lng': 15.6556545, 'valore': 10, 'comune': 'Melfi', 'provincia': 'Potenza'}, {'lat': 40.340114, 'lng': 15.9018352, 'valore': 9, 'comune': 'Viggiano', 'provincia': 'Potenza'}, {'lat': 40.340114, 'lng': 15.9018352, 'valore': 11, 'comune': 'Viggiano', 'provincia': 'Potenza'}, {'lat': 40.340114, 'lng': 15.9018352, 'valore': 9, 'comune': 'Viggiano', 'provincia': 'Potenza'}, {'lat': 40.620076, 'lng': 16.1436174, 'valore': 9, 'comune': 'Tricarico', 'provincia': 'Matera'}, {'lat': 38.954989, 'lng': 16.641105, 'valore': 7, 'comune': 'Simeri Crichi', 'provincia': 'Catanzaro'}, {'lat': 38.4065094, 'lng': 16.0774549, 'valore': 13, 'comune': 'Polistena', 'provincia': 'Reggio di Calabria'}, {'lat': 38.0173961, 'lng': 12.5160225, 'valore': 8, 'comune': 'Trapani', 'provincia': 'Trapani'}, {'lat': 38.079351, 'lng': 13.509349, 'valore': 12, 'comune': 'Bagheria', 'provincia': 'Palermo'}, {'lat': 38.1112268, 'lng': 13.3524434, 'valore': 14, 'comune': 'Palermo', 'provincia': 'Palermo'}, {'lat': 38.1112268, 'lng': 13.3524434, 'valore': 14, 'comune': 'Palermo', 'provincia': 'Palermo'}, {'lat': 38.1112268, 'lng': 13.3524434, 'valore': 12, 'comune': 'Palermo', 'provincia': 'Palermo'}, {'lat': 38.1937571, 'lng': 15.5542082, 'valore': 11, 'comune': 'Messina', 'provincia': 'Messina'}, {'lat': 38.2208049, 'lng': 15.2415129, 'valore': 13, 'comune': 'Milazzo', 'provincia': 'Messina'}, {'lat': 37.3122991, 'lng': 13.57465, 'valore': 9, 'comune': 'Agrigento', 'provincia': 'Agrigento'}, {'lat': 37.3122991, 'lng': 13.57465, 'valore': 10, 'comune': 'Agrigento', 'provincia': 'Agrigento'}, {'lat': 37.2883127, 'lng': 13.52755, 'valore': 10, 'comune': 'Porto Empedocle', 'provincia': 'Agrigento'}, {'lat': 37.0664363, 'lng': 14.2502445, 'valore': 14, 'comune': 'Gela', 'provincia': 'Caltanissetta'}, {'lat': 37.5667573, 'lng': 14.2807473, 'valore': 9, 'comune': 'Enna', 'provincia': 'Enna'}, {'lat': 37.5023612, 'lng': 15.0873718, 'valore': 12, 'comune': 'Catania', 'provincia': 'Catania'}, {'lat': 37.5191722, 'lng': 15.0079363, 'valore': 14, 'comune': 'Misterbianco', 'provincia': 'Catania'}, {'lat': 37.0646139, 'lng': 15.2907196, 'valore': 9, 'comune': 'Siracusa', 'provincia': 'Siracusa'}, {'lat': 37.1579298, 'lng': 15.1860285, 'valore': 11, 'comune': 'Priolo Gargallo', 'provincia': 'Siracusa'}, {'lat': 40.8370333, 'lng': 8.4013292, 'valore': 8, 'comune': 'Porto Torres', 'provincia': 'Sassari'}, {'lat': 40.7778499, 'lng': 8.9219725134863, 'valore': 6, 'comune': 'Sassari', 'provincia': 'Sassari'}, {'lat': 40.2651904, 'lng': 8.7813868, 'valore': 6, 'comune': 'Macomer', 'provincia': 'Nuoro'}, {'lat': 39.2171994, 'lng': 9.113311, 'valore': 13, 'comune': 'Cagliari', 'provincia': 'Cagliari'}, {'lat': 39.0655592, 'lng': 9.0108295, 'valore': 8, 'comune': 'Sarroch', 'provincia': 'Cagliari'}, {'lat': 39.0655592, 'lng': 9.0108295, 'valore': 9, 'comune': 'Sarroch', 'provincia': 'Cagliari'}, {'lat': 39.2539413, 'lng': 9.1432062, 'valore': 7, 'comune': 'Monserrato', 'provincia': 'Cagliari'}, {'lat': 39.207031, 'lng': 8.380931, 'valore': 6, 'comune': 'Portoscuso', 'provincia': 'Sud Sardegna'}, {'lat': 39.207031, 'lng': 8.380931, 'valore': 9, 'comune': 'Portoscuso', 'provincia': 'Sud Sardegna'}, {'lat': 44.39071, 'lng': 7.54828, 'valore': 14, 'comune': 'Mondov�', 'provincia': 'Cuneo'}, {'lat': 43.46556, 'lng': 12.2375, 'valore': 16, 'comune': 'Citt� di Castello', 'provincia': 'Perugia'}, {'lat': 40.8358846, 'lng': 14.2487679, 'valore': 14, 'comune': 'Napoli', 'provincia': 'Napoli'}, {'lat': 41.1257843, 'lng': 16.8620293, 'valore': 12, 'comune': 'Bari', 'provincia': 'Bari'}];




    // Funzione per determinare il colore del marker in base al valore
    function getColor(valore) {
                if (valore <= 5) {
                    return "blue"; // PM10 molto basso
                } else if (valore > 5 && valore <= 10) {
                    return "green"; // PM10 basso
                } else if (valore > 10 && valore <= 15) {
                    return "yellow"; // PM10 medio
                } else if (valore > 15 && valore <= 25) {
                    return "orange"; // PM10 alto
                } else if (valore > 25) {
                    return "red"; // PM2,5 alto
                }
            }

            // Aggiungi i marker alla mappa
            data.forEach(entry => {
                const circle = L.circleMarker([entry.lat, entry.lng], {
                    radius: 10,
                    color: getColor(entry.valore),
                    fillColor: getColor(entry.valore),
                    fillOpacity: 0.8
                });

                circle.bindPopup(`<b>Provincia:</b> ${entry.provincia}<br><b>Valore PM2,5:</b> ${entry.valore}`);
                circle.addTo(map);
            });

            // Aggiungi i marker alla mappa
            data.forEach(entry => {
                const circle = L.circleMarker([entry.lat, entry.lng], {
                    radius: 10,
                    color: getColor(entry.valore),
                    fillColor: getColor(entry.valore),
                    fillOpacity: 0.8
                });

                // Contenuto del popup
                circle.bindPopup(`
                    <b>Comune:</b> ${entry.comune}<br>
                    <b>Provincia:</b> ${entry.provincia || "Non specificata"}<br>
                    <b>Valore PM2,5:</b> ${entry.valore}
                `);

                circle.addTo(map);
            });

    </script>
</body>
</html>